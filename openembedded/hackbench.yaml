metadata:
    name: hackbench
    format: "Lava-Test-Shell Test Definition 1.0"
    version: 1.0
    description: "Hackbench Suite"
    maintainer:
        - ciprian.barbu@linaro.org
        - anders.roxell@linaro.org
    os:
        - openembedded
    devices:
        - arndale
    scope:
        - performance
        - preempt-rt

run:
    steps:
        - ./openembedded/scripts/dd_infinite.sh &> /dev/null &
        - while true; do sleep 5; killall hackbench; done &
        - for i in {1..1001}; do hackbench | tee -a hackbench_res.txt; done
        - ./openembedded/scripts/hackbench_parse.py hackbench_res.txt
        - killall dd_infinite.sh

parse:
    pattern: '^(?P<test_case_id>\w+):\s+(?P<measurement>\d+(\.\d+)?)\s+(?P<units>\S+)\s+(?P<result>\w+)'
