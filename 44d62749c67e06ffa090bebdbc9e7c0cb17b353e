{
  "comments": [
    {
      "key": {
        "uuid": "facab960_0eaa4819",
        "filename": "automated/utils/test-runner.py",
        "patchSetId": 3
      },
      "lineNbr": 471,
      "author": {
        "id": 1000003
      },
      "writtenOn": "2017-05-31T07:29:37Z",
      "side": 1,
      "message": "we seem to be parsing the output twice. in parse_stdout() and in parse_pattern(). isn\u0027t there a chance that we report test twice ? i suppose I am missing something here. how is the \u0027parse\u0027 thing supposed to be used, do you have a test def that can show it?",
      "revId": "44d62749c67e06ffa090bebdbc9e7c0cb17b353e",
      "serverId": "f33910f19b7abb192b83adbd000000bf",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "facab960_3034cadd",
        "filename": "automated/utils/test-runner.py",
        "patchSetId": 3
      },
      "lineNbr": 471,
      "author": {
        "id": 1000096
      },
      "writtenOn": "2017-05-31T09:21:27Z",
      "side": 1,
      "message": "parse_stdout() use a fixed pattern to match the result lines generated by \u0027send-to-lava.sh\u0027 or \u0027lava-test-case\u0027 itself, the format is fixed as below\n\n\u003cTEST_CASE_ID\u003d${test} RESULT\u003d${result} UNITS\u003d${units} MEASUREMENT\u003d${measurement}\u003e\n\nparse pattern in yaml file is LAVA\u0027s feature,  refer to https://validation.linaro.org/static/docs/v2/writing-tests.html\n\nparse_pattern() use the pattern defined in yaml file to filter test log to get the lines that matches and covert them to LAVA results.\n\nEither send-to-lava.sh or \u0027parse patter in yaml file\u0027, for good reasons, only one of them should be used. But, theoretically, test witter can use both \u0027send-to-lava.sh/lava-test-case\u0027 and \u0027parse pattern\u0027 in the same time, test-runner shouldn\u0027t stop them from doing so for whatever reasons, LAVA doesn\u0027t do that. However, customized parse pattern in yaml file shouldn\u0027t try to parse the same lines that already parsed in test script, that is pointless. \n\nAs you can see on the above page, parse pattern is not recommended by LAVA as it is confusing and hard to debug, that also is why most of our test cases under \u0027automated\u0027 folder are using \u0027send-to-lava.sh\u0027 only. Basically, don\u0027t use \u0027parse pattern\u0027 if we don\u0027t have to.\n\nlinux/kselftest and android/pm-qa are the only two tests that using parse pattern, but they don\u0027t need the \u0027fixup\u0027(another confusing design) feature, so I created https://git.linaro.org/people/chase.qi/test-definitions.git/tree/automated/linux/ltp-p/ltp-p.yaml to test this patch.\n\nHere is output example https://pastebin.linaro.org/view/a96e06e6",
      "parentUuid": "facab960_0eaa4819",
      "revId": "44d62749c67e06ffa090bebdbc9e7c0cb17b353e",
      "serverId": "f33910f19b7abb192b83adbd000000bf",
      "unresolved": false
    }
  ]
}