{
  "comments": [
    {
      "key": {
        "uuid": "7a1969be_30bfa5d2",
        "filename": "automated/android/stringbench/stringbench.sh",
        "patchSetId": 3
      },
      "lineNbr": 15,
      "author": {
        "id": 1000021
      },
      "writtenOn": "2017-03-21T06:41:43Z",
      "side": 1,
      "message": "so not adb overtcpip supported on v2?\n\nfor adb connection over tcpip, adb root would make the adb connection lost",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 15,
        "endChar": 8
      },
      "revId": "b41d48c98501cec77150f4f54999a99203fde768",
      "serverId": "f33910f19b7abb192b83adbd000000bf",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_3094c536",
        "filename": "automated/android/stringbench/stringbench.sh",
        "patchSetId": 3
      },
      "lineNbr": 15,
      "author": {
        "id": 1000096
      },
      "writtenOn": "2017-03-21T07:49:26Z",
      "side": 1,
      "message": "As I know hikey v2 devices use adb usb over usb.\n\nNo mater LAVA LXC use ethernet or usb for adb connection, It has to provide a way to obtain \u0027root permission\u0027.\n\nAt this moment, as Senthil advised, we are handling it in this way\nhttps://git.linaro.org/qa/test-definitions.git/tree/automated/lib/android-test-lib#n38",
      "parentUuid": "7a1969be_30bfa5d2",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 15,
        "endChar": 8
      },
      "revId": "b41d48c98501cec77150f4f54999a99203fde768",
      "serverId": "f33910f19b7abb192b83adbd000000bf",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_5063411a",
        "filename": "automated/android/stringbench/stringbench.sh",
        "patchSetId": 3
      },
      "lineNbr": 15,
      "author": {
        "id": 1000015
      },
      "writtenOn": "2017-03-21T11:51:41Z",
      "side": 1,
      "message": "This is only partially true. Connection to juno will still be over tcp/ip.",
      "parentUuid": "7a1969be_3094c536",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 15,
        "endChar": 8
      },
      "revId": "b41d48c98501cec77150f4f54999a99203fde768",
      "serverId": "f33910f19b7abb192b83adbd000000bf",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_e347054a",
        "filename": "automated/android/stringbench/stringbench.sh",
        "patchSetId": 3
      },
      "lineNbr": 15,
      "author": {
        "id": 1000021
      },
      "writtenOn": "2017-03-21T14:01:54Z",
      "side": 1,
      "message": "I meant the \"adb root\" command called in the lib script, this might cause the adb connection over tcpip lost. Since adb root would cause the adbd service restarted if adb is not running as root already",
      "parentUuid": "7a1969be_3094c536",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 15,
        "endChar": 8
      },
      "revId": "b41d48c98501cec77150f4f54999a99203fde768",
      "serverId": "f33910f19b7abb192b83adbd000000bf",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_c36769e9",
        "filename": "automated/android/stringbench/stringbench.sh",
        "patchSetId": 3
      },
      "lineNbr": 15,
      "author": {
        "id": 1000015
      },
      "writtenOn": "2017-03-21T14:14:43Z",
      "side": 1,
      "message": "you\u0027re right and I guess we need to use ANDROID_SERIAL to work around the problem. The adb_root should do all the work. Currently it only does \u0027wait-for-device\u0027. Maybe it should do \u0027adb connect\u0027 as well? With ANDROID_SERIAL it would just work.",
      "parentUuid": "7a1969be_e347054a",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 15,
        "endChar": 8
      },
      "revId": "b41d48c98501cec77150f4f54999a99203fde768",
      "serverId": "f33910f19b7abb192b83adbd000000bf",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_63e2f504",
        "filename": "automated/android/stringbench/stringbench.sh",
        "patchSetId": 3
      },
      "lineNbr": 15,
      "author": {
        "id": 1000096
      },
      "writtenOn": "2017-03-22T02:12:12Z",
      "side": 1,
      "message": "I don\u0027t have juno, but I tried on hikey.  To connect to hikey over tcp/ip, we need to run the following 3 lines to set adbd, right?\n\nroot@hikey:/ # setprop service.adb.tcp.port 5555                               \nroot@hikey:/ # stop adbd\nroot@hikey:/ # start adbd\n\nIt says: only root user can run \u0027stop/start adbd\u0027.  If we run \u0027stop/start adbd\u0027 as root, \u0027adb root\u0027 from the host will say \u0027adbd is already running as root\u0027, it will do nothing and wouldn\u0027t lead to device lost.\n\nPlease notice that \u0027adb connect \u003chost\u003e[:\u003cport\u003e]\u0027 only support TCP/IP. \n\nI don\u0027t have a clean idea about how to support adb over tcp/ip yet, from my point of view,  local-user/LAVA should provide a device that running adbd as root to test script.\n\n----\n\nTo support multiple devices for local run, I can add \u0027-s\u0027 to all the adb commands. https://review.linaro.org/#/c/18055/\n\n----\n\nRegarding \u0027SN\u0027 vs \u0027ANDROID_SERIAL\u0027, from \u0027adb help\u0027, I see this \n\nANDROID_SERIAL               - The serial number to connect to. -s takes priority over this if given.\n\nFrom my understanding, \u0027ANDROID_SERIAL\u0027 is an environmental variable that adb use by default, while \u0027-s\u0027 is used to specify a serial no. to overwrite it. I don\u0027t see using \u0027-s ANDROID_SERIAL\u0027 is a better idea.  But if you guys really want to do that, we need another patch to update initialize_adb() and test cases that already using \u0027SN\u0027.",
      "parentUuid": "7a1969be_c36769e9",
      "range": {
        "startLine": 15,
        "startChar": 0,
        "endLine": 15,
        "endChar": 8
      },
      "revId": "b41d48c98501cec77150f4f54999a99203fde768",
      "serverId": "f33910f19b7abb192b83adbd000000bf",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_90b499f3",
        "filename": "automated/android/stringbench/stringbench.sh",
        "patchSetId": 3
      },
      "lineNbr": 37,
      "author": {
        "id": 1000021
      },
      "writtenOn": "2017-03-21T06:41:43Z",
      "side": 1,
      "message": "does this SN need need to be defined explicitly?\nis there some function used for parsing the -s option?\n\nfor SN, I suggest to use the same gobal environment variabl ANDROID_SERIAL as adb command, instead to use a separate SN for same meaning.",
      "range": {
        "startLine": 37,
        "startChar": 18,
        "endLine": 37,
        "endChar": 20
      },
      "revId": "b41d48c98501cec77150f4f54999a99203fde768",
      "serverId": "f33910f19b7abb192b83adbd000000bf",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_d0a29199",
        "filename": "automated/android/stringbench/stringbench.sh",
        "patchSetId": 3
      },
      "lineNbr": 37,
      "author": {
        "id": 1000096
      },
      "writtenOn": "2017-03-21T07:49:26Z",
      "side": 1,
      "message": "It is set in initialize_adb()\n\n\u0027-s ${SN}\u0027 is only useful when more then one devices connected to the same host. I am actually not sure if we really need to support this case. If we really do, I can add \u0027-s\u0027 param to the script and yaml file, otherwise, it is safe to remove \u0027-s ${SN}\u0027.\n\nMilosz, comments?",
      "parentUuid": "7a1969be_90b499f3",
      "range": {
        "startLine": 37,
        "startChar": 18,
        "endLine": 37,
        "endChar": 20
      },
      "revId": "b41d48c98501cec77150f4f54999a99203fde768",
      "serverId": "f33910f19b7abb192b83adbd000000bf",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_306845f5",
        "filename": "automated/android/stringbench/stringbench.sh",
        "patchSetId": 3
      },
      "lineNbr": 37,
      "author": {
        "id": 1000015
      },
      "writtenOn": "2017-03-21T11:51:41Z",
      "side": 1,
      "message": "Since the test is supposed to run on the local bench as well, I suppose we should support SN (this way or another).",
      "parentUuid": "7a1969be_d0a29199",
      "range": {
        "startLine": 37,
        "startChar": 18,
        "endLine": 37,
        "endChar": 20
      },
      "revId": "b41d48c98501cec77150f4f54999a99203fde768",
      "serverId": "f33910f19b7abb192b83adbd000000bf",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_4374199c",
        "filename": "automated/android/stringbench/stringbench.sh",
        "patchSetId": 3
      },
      "lineNbr": 37,
      "author": {
        "id": 1000021
      },
      "writtenOn": "2017-03-21T14:01:54Z",
      "side": 1,
      "message": "On local side, we would have more android devices connected, and this should be supported.\n\nBy using ANDROID_SERIAL, it will help to make the scripts simple, just like \"export ANDROID_SERIAL\u003dxxx\" at the beginning, then the remaining source code could just run adb commands directly, no need to parse and pass the SN down to the next script called.",
      "parentUuid": "7a1969be_d0a29199",
      "range": {
        "startLine": 37,
        "startChar": 18,
        "endLine": 37,
        "endChar": 20
      },
      "revId": "b41d48c98501cec77150f4f54999a99203fde768",
      "serverId": "f33910f19b7abb192b83adbd000000bf",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_a364ede5",
        "filename": "automated/android/stringbench/stringbench.sh",
        "patchSetId": 3
      },
      "lineNbr": 37,
      "author": {
        "id": 1000015
      },
      "writtenOn": "2017-03-21T14:14:43Z",
      "side": 1,
      "message": "Agree, ANDROID_SERIAL is the way to go forward. I guess this needs some patch on the lib side to check whether the env variable is actually set.",
      "parentUuid": "7a1969be_4374199c",
      "range": {
        "startLine": 37,
        "startChar": 18,
        "endLine": 37,
        "endChar": 20
      },
      "revId": "b41d48c98501cec77150f4f54999a99203fde768",
      "serverId": "f33910f19b7abb192b83adbd000000bf",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_c3e64916",
        "filename": "automated/android/stringbench/stringbench.sh",
        "patchSetId": 3
      },
      "lineNbr": 37,
      "author": {
        "id": 1000096
      },
      "writtenOn": "2017-03-22T02:12:12Z",
      "side": 1,
      "message": "All we need to do is add \u0027-s\u0027 parameter for the test script and yaml definition file.\n\nhttps://git.linaro.org/qa/test-definitions.git/tree/automated/lib/android-test-lib#n12\n\nIf SN specified, initialize_adb() will use it directly. If SN not specified and only one device found, initialize_adb() will get the serial no. and assign it to SN; if more then once device found, it will exit and ask user specify one.",
      "parentUuid": "7a1969be_a364ede5",
      "range": {
        "startLine": 37,
        "startChar": 18,
        "endLine": 37,
        "endChar": 20
      },
      "revId": "b41d48c98501cec77150f4f54999a99203fde768",
      "serverId": "f33910f19b7abb192b83adbd000000bf",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_50ba21e2",
        "filename": "automated/android/stringbench/stringbench.yaml",
        "patchSetId": 3
      },
      "lineNbr": 24,
      "author": {
        "id": 1000021
      },
      "writtenOn": "2017-03-21T06:41:43Z",
      "side": 1,
      "message": "Could we make these 3 steps one, either with parameters or without?",
      "range": {
        "startLine": 22,
        "startChar": 0,
        "endLine": 24,
        "endChar": 57
      },
      "revId": "b41d48c98501cec77150f4f54999a99203fde768",
      "serverId": "f33910f19b7abb192b83adbd000000bf",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_b09f1550",
        "filename": "automated/android/stringbench/stringbench.yaml",
        "patchSetId": 3
      },
      "lineNbr": 24,
      "author": {
        "id": 1000096
      },
      "writtenOn": "2017-03-21T07:49:26Z",
      "side": 1,
      "message": "Can you please explain the reasons or benefits in doing that?",
      "parentUuid": "7a1969be_50ba21e2",
      "range": {
        "startLine": 22,
        "startChar": 0,
        "endLine": 24,
        "endChar": 57
      },
      "revId": "b41d48c98501cec77150f4f54999a99203fde768",
      "serverId": "f33910f19b7abb192b83adbd000000bf",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7a1969be_e330a5ea",
        "filename": "automated/android/stringbench/stringbench.yaml",
        "patchSetId": 3
      },
      "lineNbr": 24,
      "author": {
        "id": 1000021
      },
      "writtenOn": "2017-03-21T14:01:54Z",
      "side": 1,
      "message": "like just running  \"./automated/android/stringbench/stringbench.sh --send-result-to-lava\",\n\nand by this, on local side, I could also run ./automated/android/stringbench/stringbench.sh from the root of this repository, and no need to change to the specific directory.",
      "parentUuid": "7a1969be_b09f1550",
      "range": {
        "startLine": 22,
        "startChar": 0,
        "endLine": 24,
        "endChar": 57
      },
      "revId": "b41d48c98501cec77150f4f54999a99203fde768",
      "serverId": "f33910f19b7abb192b83adbd000000bf",
      "unresolved": false
    }
  ]
}