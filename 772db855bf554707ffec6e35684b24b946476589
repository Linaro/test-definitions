{
  "comments": [
    {
      "key": {
        "uuid": "8098ef13_c01b527f",
        "filename": "automated/android/noninteractive-tradefed/setup.sh",
        "patchSetId": 2
      },
      "lineNbr": 12,
      "author": {
        "id": 1000096
      },
      "writtenOn": "2018-12-07T04:52:47Z",
      "side": 1,
      "message": "Where is the var from? When it is set?",
      "range": {
        "startLine": 12,
        "startChar": 13,
        "endLine": 12,
        "endChar": 28
      },
      "revId": "772db855bf554707ffec6e35684b24b946476589",
      "serverId": "f33910f19b7abb192b83adbd000000bf",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6b458ab6_f4e18177",
        "filename": "automated/android/noninteractive-tradefed/setup.sh",
        "patchSetId": 2
      },
      "lineNbr": 12,
      "author": {
        "id": 1000180
      },
      "writtenOn": "2018-12-07T04:56:15Z",
      "side": 1,
      "message": "This is set as a parameter to the job: https://lkft.validation.linaro.org/scheduler/job/539017/definition#defline147",
      "parentUuid": "8098ef13_c01b527f",
      "range": {
        "startLine": 12,
        "startChar": 13,
        "endLine": 12,
        "endChar": 28
      },
      "revId": "772db855bf554707ffec6e35684b24b946476589",
      "serverId": "f33910f19b7abb192b83adbd000000bf",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e3b9df58_fb88f896",
        "filename": "automated/android/noninteractive-tradefed/setup.sh",
        "patchSetId": 2
      },
      "lineNbr": 12,
      "author": {
        "id": 1000096
      },
      "writtenOn": "2018-12-07T05:40:11Z",
      "side": 1,
      "message": "Thanks for the pointer. I finally figured how it works. LAVA picks up the param from test job and run setup.sh with the same env(. ./setup.sh). The same env includes the shell. This also explains why \u0027[[\u0027 didn\u0027t work when /bin/bash specified in the first line as the script was executed with /bin/sh(inherited from its parent script run.sh).\n\nIMHO, add the param to tradefed.yaml and pass it to setup.sh(./setup.sh params) will be more readable and more explicit. Not has to be done in this patch.",
      "parentUuid": "6b458ab6_f4e18177",
      "range": {
        "startLine": 12,
        "startChar": 13,
        "endLine": 12,
        "endChar": 28
      },
      "revId": "772db855bf554707ffec6e35684b24b946476589",
      "serverId": "f33910f19b7abb192b83adbd000000bf",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f7250663_4898e59a",
        "filename": "automated/android/noninteractive-tradefed/setup.sh",
        "patchSetId": 2
      },
      "lineNbr": 12,
      "author": {
        "id": 1000180
      },
      "writtenOn": "2018-12-07T05:45:40Z",
      "side": 1,
      "message": "It is not that simple. if you see the script sets up adb next. The script needs to be run in the current shell context itself for ANDROID_SERIAL to be exported and later to be used by tradefed next. We need to first fix the broken thing, we can look at cleanup next",
      "parentUuid": "e3b9df58_fb88f896",
      "range": {
        "startLine": 12,
        "startChar": 13,
        "endLine": 12,
        "endChar": 28
      },
      "revId": "772db855bf554707ffec6e35684b24b946476589",
      "serverId": "f33910f19b7abb192b83adbd000000bf",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fe0dc2e9_164e0d0c",
        "filename": "automated/android/noninteractive-tradefed/setup.sh",
        "patchSetId": 2
      },
      "lineNbr": 12,
      "author": {
        "id": 1000096
      },
      "writtenOn": "2018-12-07T06:19:01Z",
      "side": 1,
      "message": "It is complicated indeed. Lets get the fix merge first.",
      "parentUuid": "f7250663_4898e59a",
      "range": {
        "startLine": 12,
        "startChar": 13,
        "endLine": 12,
        "endChar": 28
      },
      "revId": "772db855bf554707ffec6e35684b24b946476589",
      "serverId": "f33910f19b7abb192b83adbd000000bf",
      "unresolved": false
    }
  ]
}