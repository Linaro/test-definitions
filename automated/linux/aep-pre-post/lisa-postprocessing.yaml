metadata:
    format: Lava-Test Test Definition 1.0
    name: lisa-postprocessing
    description: "Post-processing of results generated by
                  Workload Automation v3."
    maintainer:
        - lisa.nguyen@linaro.org
        - milosz.wasilewski@linaro.org
    os:
        - ubuntu
    devices:
        - hi6220-hikey
        - hi960-hikey
        - juno

params:
    LISA_REPOSITORY: https://github.com/ARM-software/lisa
    LISA_REF: master
    # LISA_SCRIPT is a path relative to LISA top directory
    LISA_SCRIPT: ipynb/wltests/sched-evaluation-full.py
    SKIP_INSTALL: false

run:
    steps:
        - cd ./automated/linux/aep-pre-post
        - export LISA_SHELL_DISABLE_COLORS=true
        - export TERM=xterm
        - ./lisa.sh -r "${LISA_REPOSITORY}" -t "${LISA_REF}" -s "${LISA_SCRIPT}" -S "${SKIP_INSTALL}"
        - ../../utils/send-to-lava.sh ./output/result.txt
