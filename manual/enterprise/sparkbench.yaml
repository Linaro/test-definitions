metadata:
    name: sparkbench
    format: "Manual Test Definition 1.0"
    description: "Functional tests of Spark bench"
    maintainer:
        - milosz.wasilewski@linaro.org
    os:
        - CentOS
    scope:
        - performance
    devices:
        - d02
        - d03
        - d05
        - overdrive
        - moonshot
    environment:
        - manual-test

run:
    steps:
        - "Follow steps in ‘Setting up ODPi Hadoop in Single node’ following link to
          install and configure Hadoop, Spark and Hive: https://wiki.linaro.org/LEG/Engineering/BigData/ODPi%20BigTop%20Hadoop%20Installation,%20setup%20and%20running"
        - "Follow steps in Getting Started guide on the following link to
          install and configure spark-bench: https://github.com/SparkTC/spark-bench/"
        - "Make sure Spark is installed and running.
$ <SPARK_HOME>/bin/spark-shell"
        - "Run the gen-data.sh script
          $ <SPARK_BENCH_HOME>/SQL/bin/gen_data.sh"
        - "Check if sample data sets are created in /SparkBench/sql/Input
          in HDFS. If not, then there is a bug in spark bench scripts that
          needs to be fixed using the following steps"
        - "Run the run.sh script
          $ <SPARK_BENCH_HOME>/SQL/bin/run.sh"
        - "After running this, check <SPARK_BENCH_HOME>/num/bench-report.dat
          to see if the run was successful."
    expected:
        - HDFS is populated by gen-data.sh script
        - bench-report.dat contains proper data
